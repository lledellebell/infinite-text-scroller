{"version":3,"file":"index.js","sources":["../src/constants.js","../src/helpers.js","../src/styles.js","../src/instance.js","../src/index.js"],"sourcesContent":["/**\n * 상수 및 기본 설정\n * @module constants\n */\n\n// 타이밍 상수\nexport const TIMING = {\n  HOVER_RESUME_DELAY: 2000,\n  FOCUS_RESUME_DELAY: 2000,\n  VISIBILITY_RESUME_DELAY: 500\n};\n\n// 기본 설정\nexport const DEFAULT_CONFIG = {\n  text: '',\n  html: '',\n  children: '',\n  direction: 'horizontal',\n  animationType: 'scroll', // 'scroll' | 'fade'\n  speed: 20,\n  interval: 5000, // fade 타입용 (ms)\n  fontSize: '1.2rem',\n  fontWeight: '400',\n  fontFamily: 'inherit',\n  textColor: '#000000',\n  backgroundColor: '#ffffff',\n  separator: '—',\n  separatorColor: 'inherit',\n  separatorOpacity: 0.5,\n  duplicates: 3,\n  pauseOnHover: true,\n  pauseOnFocus: true,\n  autoInjectStyles: true,\n  className: '',\n  fadeEdges: true,\n  fadeWidth: 'clamp(60px, 10vw, 100px)',\n  borderTop: true,\n  borderBottom: true,\n  borderColor: '#000000',\n  borderWidth: '1px',\n  padding: 'clamp(1rem, 2vw, 2rem)',\n  gap: 'calc(var(--its-spacing-base) * 2)',\n  letterSpacing: '-0.01em',\n  animationTimingFunction: 'linear',\n  animationDelay: '0s',\n  rtl: false,\n  // ARIA/접근성\n  ariaLabel: '',\n  ariaLive: 'off', // 'off' | 'polite' | 'assertive'\n  role: 'marquee', // 'marquee' | 'region'\n  // 키보드 제어\n  enableKeyboardControl: true,\n  // prefers-reduced-motion 대응\n  reducedMotionFallback: 'slow' // 'slow' | 'static' | 'none'\n};\n\n// 프리셋 설정\nexport const PRESETS = {\n  minimal: {\n    borderTop: false,\n    borderBottom: false,\n    fadeEdges: false,\n    padding: '1rem',\n    backgroundColor: 'transparent'\n  },\n  news: {\n    speed: 15,\n    separator: '•',\n    borderTop: true,\n    borderBottom: true,\n    fadeEdges: true,\n    ariaLabel: '뉴스 티커'\n  },\n  ticker: {\n    speed: 10,\n    separator: '|',\n    separatorOpacity: 0.3,\n    fontSize: '1rem',\n    fadeEdges: true,\n    ariaLabel: '실시간 정보 티커'\n  },\n  banner: {\n    speed: 25,\n    separator: '—',\n    borderTop: false,\n    borderBottom: false,\n    fadeEdges: true,\n    fadeWidth: '100px',\n    padding: '2rem'\n  },\n  alert: {\n    speed: 12,\n    separator: '⚠',\n    separatorColor: '#ff0000',\n    textColor: '#ff0000',\n    backgroundColor: '#fff3cd',\n    borderTop: true,\n    borderBottom: true,\n    borderColor: '#ff0000',\n    ariaLive: 'polite'\n  },\n  // 새로운 프리셋: 공지사항 (fade-in/out)\n  announcement: {\n    animationType: 'fade',\n    interval: 5000,\n    separator: '',\n    borderTop: true,\n    borderBottom: true,\n    fadeEdges: false,\n    backgroundColor: '#fef3c7',\n    textColor: '#92400e',\n    borderColor: '#fbbf24',\n    ariaLabel: '공지사항',\n    pauseOnHover: true,\n    pauseOnFocus: true\n  },\n  // 환율/주식 티커\n  currency: {\n    speed: 20,\n    separator: '|',\n    separatorOpacity: 0.3,\n    fontSize: '1rem',\n    fadeEdges: true,\n    borderTop: true,\n    borderBottom: false,\n    backgroundColor: '#1e3a8a',\n    textColor: '#ffffff',\n    borderColor: 'rgba(255, 255, 255, 0.1)',\n    ariaLabel: '실시간 환율 정보',\n    pauseOnHover: true\n  },\n  stock: {\n    speed: 15,\n    separator: '•',\n    separatorOpacity: 0.5,\n    fontSize: '0.95rem',\n    fadeEdges: true,\n    borderTop: true,\n    borderBottom: true,\n    backgroundColor: '#0f172a',\n    textColor: '#e2e8f0',\n    borderColor: '#334155',\n    ariaLabel: '실시간 주식 정보',\n    pauseOnHover: true\n  }\n};\n\n// 검증 범위\nexport const VALIDATION_RANGES = {\n  speed: { min: 0.1, max: 1000, default: 20 },\n  duplicates: { min: 1, max: 20, default: 3 },\n  separatorOpacity: { min: 0, max: 1, default: 0.5 }\n};\n\n// 허용된 HTML 태그 및 속성\nexport const ALLOWED_HTML = {\n  tags: new Set(['b', 'strong', 'i', 'em', 'u', 'span', 'br', 'mark']),\n  attributes: new Set(['style', 'class'])\n};\n","\n/**\n * 헬퍼 함수들\n * @module helpers\n */\n\nimport { ALLOWED_HTML, VALIDATION_RANGES } from './constants.js';\n\n/**\n * HTML 새니타이징 (XSS 방지)\n * @param {string} html - 새니타이징할 HTML 문자열\n * @returns {string} 새니타이징된 HTML\n */\nexport function sanitizeHTML(html) {\n  const temp = document.createElement('div');\n  temp.innerHTML = html;\n\n  const walker = document.createTreeWalker(\n    temp,\n    NodeFilter.SHOW_ELEMENT,\n    null,\n    false\n  );\n\n  const nodesToRemove = [];\n  let node;\n\n  while ((node = walker.nextNode())) {\n    const tagName = node.tagName.toLowerCase();\n\n    if (!ALLOWED_HTML.tags.has(tagName)) {\n      nodesToRemove.push(node);\n      continue;\n    }\n\n    const attrs = Array.from(node.attributes);\n    for (const attr of attrs) {\n      if (!ALLOWED_HTML.attributes.has(attr.name.toLowerCase())) {\n        node.removeAttribute(attr.name);\n      }\n    }\n  }\n\n  for (const node of nodesToRemove) {\n    const text = document.createTextNode(node.textContent);\n    node.parentNode.replaceChild(text, node);\n  }\n\n  return temp.innerHTML;\n}\n\n/**\n * 숫자 파라미터 검증\n * @param {number} value - 검증할 값\n * @param {string} paramName - 파라미터 이름\n * @returns {number} 검증된 값\n */\nexport function validateNumber(value, paramName) {\n  const range = VALIDATION_RANGES[paramName];\n  if (!range) {\n    console.warn(`[TextScroller] ${paramName}에 대한 검증 범위가 정의되지 않았습니다`);\n    return value;\n  }\n\n  const { min, max, default: defaultValue } = range;\n\n  if (typeof value !== 'number' || isNaN(value)) {\n    console.warn(`[TextScroller] ${paramName}는 숫자여야 합니다. 기본값(${defaultValue}) 사용`);\n    return defaultValue;\n  }\n  if (min !== null && value < min) {\n    console.warn(`[TextScroller] ${paramName}는 ${min} 이상이어야 합니다. 최소값 사용`);\n    return min;\n  }\n  if (max !== null && value > max) {\n    console.warn(`[TextScroller] ${paramName}는 ${max} 이하여야 합니다. 최대값 사용`);\n    return max;\n  }\n  return value;\n}\n\n/**\n * DOM 요소 생성\n * @param {string} tag - 태그 이름\n * @param {string} className - 클래스 이름\n * @param {string} textContent - 텍스트 내용\n * @returns {HTMLElement} 생성된 요소\n */\nexport function createElement(tag, className, textContent = '') {\n  const el = document.createElement(tag);\n  if (className) el.className = className;\n  if (textContent) el.textContent = textContent;\n  return el;\n}\n\n/**\n * 개별 스크롤러 아이템 생성\n * @param {string} text - 텍스트\n * @param {string} separator - 구분자\n * @param {string} direction - 방향\n * @param {Object} config - 설정\n * @returns {HTMLElement} 생성된 아이템\n */\nexport function createScrollerItem(text, separator, direction, config) {\n  const item = createElement('div', 'its-scroller-item');\n  const textSpan = createElement('span', 'its-scroller-text');\n\n  // children이 우선, 그 다음 html, 마지막으로 text\n  if (config.children) {\n    textSpan.innerHTML = sanitizeHTML(config.children);\n  } else if (config.html) {\n    textSpan.innerHTML = sanitizeHTML(config.html);\n  } else {\n    textSpan.textContent = text;\n  }\n\n  item.appendChild(textSpan);\n\n  if (direction === 'horizontal' && separator) {\n    const separatorSpan = createElement('span', 'its-scroller-separator', separator);\n    item.appendChild(separatorSpan);\n  }\n\n  return item;\n}\n\n/**\n * 복제된 스크롤러 트랙 생성\n * @param {string} text - 텍스트\n * @param {string} separator - 구분자\n * @param {string} direction - 방향\n * @param {number} duplicates - 복제 수\n * @param {Object} config - 설정\n * @returns {HTMLElement} 생성된 트랙\n */\nexport function createTrack(text, separator, direction, duplicates, config) {\n  const track = createElement('div', 'its-scroller-track');\n  const totalItems = duplicates * 2;\n\n  const fragment = document.createDocumentFragment();\n  for (let i = 0; i < totalItems; i++) {\n    fragment.appendChild(\n      createScrollerItem(text, separator, direction, config)\n    );\n  }\n\n  track.appendChild(fragment);\n  return track;\n}\n","/**\n * 스타일 관리\n * @module styles\n */\n\n// 인스턴스별 스타일 캐시 (Map으로 관리)\nconst styleCache = new Map();\n\n/**\n * 문서 헤드에 기본 스타일 주입\n */\nexport function injectStyles() {\n  if (document.getElementById('infinite-text-scroller-styles')) return;\n\n  const style = document.createElement('style');\n  style.id = 'infinite-text-scroller-styles';\n  style.textContent = `\n    .its-scroller-container {\n      position: relative;\n    }\n\n    .its-scroller-container.its-border-top {\n      border-block-start: var(--its-border-width, 1px) solid var(--its-border-color, #000000);\n    }\n\n    .its-scroller-container.its-border-bottom {\n      border-block-end: var(--its-border-width, 1px) solid var(--its-border-color, #000000);\n    }\n\n    .its-scroller-container:not(:last-child).its-border-bottom {\n      border-block-end: none;\n    }\n\n    /* 키보드 포커스 표시 */\n    .its-scroller-container:focus {\n      outline: 2px solid #0066cc;\n      outline-offset: 2px;\n    }\n\n    .its-scroller-container:focus:not(:focus-visible) {\n      outline: none;\n    }\n\n    .its-scroller-wrapper {\n      overflow: hidden;\n      display: flex;\n      position: relative;\n      padding-block: var(--its-padding, clamp(1rem, 2vw, 2rem));\n      isolation: isolate;\n      background-color: var(--its-bg-color, #ffffff);\n    }\n\n    /* Fade 타입 스타일 */\n    .its-scroller-wrapper.its-fade-type {\n      justify-content: center;\n      align-items: center;\n      min-height: 48px;\n    }\n\n    .its-scroller-wrapper.its-fade-type .its-scroller-track {\n      animation: none;\n    }\n\n    .its-scroller-wrapper::before,\n    .its-scroller-wrapper::after {\n      content: '';\n      position: absolute;\n      inset-block: 0;\n      inline-size: var(--its-fade-width, clamp(60px, 10vw, 100px));\n      z-index: 1;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n\n    .its-scroller-wrapper.its-fade-enabled::before,\n    .its-scroller-wrapper.its-fade-enabled::after {\n      opacity: 1;\n    }\n\n    .its-scroller-wrapper.its-horizontal::before {\n      inset-inline-start: 0;\n      background: linear-gradient(to right, var(--its-bg-color, #ffffff), transparent);\n    }\n\n    .its-scroller-wrapper.its-horizontal::after {\n      inset-inline-end: 0;\n      background: linear-gradient(to left, var(--its-bg-color, #ffffff), transparent);\n    }\n\n    .its-scroller-wrapper.its-rtl.its-horizontal .its-scroller-track {\n      flex-direction: row-reverse;\n    }\n\n    .its-scroller-wrapper.its-vertical {\n      block-size: var(--its-vertical-height, clamp(250px, 30vh, 300px));\n      align-items: center;\n      justify-content: center;\n    }\n\n    .its-scroller-wrapper.its-vertical::before {\n      inline-size: 100%;\n      block-size: 60px;\n      background: linear-gradient(to bottom, var(--its-bg-color, #ffffff), transparent);\n    }\n\n    .its-scroller-wrapper.its-vertical::after {\n      inline-size: 100%;\n      block-size: 60px;\n      background: linear-gradient(to top, var(--its-bg-color, #ffffff), transparent);\n      inset-block-start: auto;\n      inset-block-end: 0;\n    }\n\n    .its-scroller-track {\n      display: flex;\n      animation-duration: var(--its-animation-speed, 20s);\n      animation-timing-function: var(--its-animation-timing, linear);\n      animation-iteration-count: infinite;\n      animation-delay: var(--its-animation-delay, 0s);\n      will-change: transform;\n      backface-visibility: hidden;\n      transform: translateZ(0);\n    }\n\n    .its-scroller-wrapper.its-horizontal .its-scroller-track {\n      animation-name: its-scroll-horizontal;\n    }\n\n    .its-scroller-wrapper.its-vertical .its-scroller-track {\n      flex-direction: column;\n      animation-name: its-scroll-vertical;\n    }\n\n    .its-scroller-wrapper:hover .its-scroller-track.its-pause-on-hover {\n      animation-play-state: paused;\n    }\n\n    /* 애니메이션 상태 제어 클래스 */\n    .its-scroller-track.its-paused {\n      animation-play-state: paused !important;\n    }\n\n    .its-scroller-track.its-reset {\n      animation: none !important;\n    }\n\n    .its-scroller-item {\n      display: inline-flex;\n      align-items: center;\n      white-space: nowrap;\n      flex-shrink: 0;\n    }\n\n    .its-scroller-wrapper.its-vertical .its-scroller-item {\n      flex-direction: column;\n      padding-block: calc(var(--its-padding, 1rem) / 2);\n    }\n\n    /* Fade 타입 아이템 */\n    .its-scroller-wrapper.its-fade-type .its-scroller-item {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      opacity: 0;\n      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;\n      pointer-events: none;\n      width: 100%;\n      max-width: 800px;\n      justify-content: center;\n      text-align: center;\n    }\n\n    .its-scroller-wrapper.its-fade-type .its-scroller-item.its-active {\n      opacity: 1;\n      transform: translate(-50%, -50%);\n      pointer-events: auto;\n    }\n\n    .its-scroller-wrapper.its-fade-type .its-scroller-item.its-prev {\n      opacity: 0;\n      transform: translate(-50%, -65%);\n    }\n\n    .its-scroller-wrapper.its-fade-type .its-scroller-item.its-next {\n      opacity: 0;\n      transform: translate(-50%, -35%);\n    }\n\n    .its-scroller-text {\n      padding-inline: var(--its-gap, calc(var(--its-padding, 1rem) * 2));\n      font-size: var(--its-font-size, 1.2rem);\n      font-weight: var(--its-font-weight, 400);\n      font-family: var(--its-font-family, inherit);\n      color: var(--its-text-color, #000000);\n      letter-spacing: var(--its-letter-spacing, -0.01em);\n      user-select: none;\n    }\n\n    .its-scroller-separator {\n      color: var(--its-separator-color, var(--its-text-color, #000000));\n      font-size: var(--its-font-size, 1.2rem);\n      padding-inline: 0.5rem;\n      user-select: none;\n      opacity: var(--its-separator-opacity, 0.5);\n    }\n\n    @keyframes its-scroll-horizontal {\n      from { transform: translateX(0); }\n      to { transform: translateX(-50%); }\n    }\n\n    @keyframes its-scroll-vertical {\n      from { transform: translateY(0); }\n      to { transform: translateY(-50%); }\n    }\n\n    /* prefers-reduced-motion 지원 (WCAG 2.3.3) */\n    @media (prefers-reduced-motion: reduce) {\n      .its-scroller-track {\n        animation-duration: 60s !important;\n      }\n\n      .its-scroller-wrapper.its-fade-type .its-scroller-item {\n        position: relative !important;\n        opacity: 1 !important;\n        transform: none !important;\n        display: block;\n        margin-bottom: 0.5rem;\n        pointer-events: auto;\n      }\n\n      .its-scroller-wrapper.its-fade-type {\n        display: block;\n        overflow-y: auto;\n        max-height: 200px;\n      }\n    }\n\n    @media (forced-colors: active) {\n      .its-scroller-wrapper::before,\n      .its-scroller-wrapper::after {\n        display: none;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n}\n\n/**\n * 인스턴스별 스타일 태그 생성 (캐싱 포함)\n * @param {string} containerId - 컨테이너 ID\n * @param {Object} styles - 스타일 객체\n * @returns {HTMLStyleElement} 생성된 스타일 태그\n */\nexport function createInstanceStyles(containerId, styles) {\n  const styleId = `its-instance-${containerId}`;\n  let styleTag = document.getElementById(styleId);\n\n  if (!styleTag) {\n    styleTag = document.createElement('style');\n    styleTag.id = styleId;\n    document.head.appendChild(styleTag);\n  }\n\n  // 캐시에 저장\n  const cachedStyles = new Map();\n  for (const [key, value] of Object.entries(styles)) {\n    if (value !== null && value !== undefined) {\n      cachedStyles.set(key, value);\n    }\n  }\n  styleCache.set(containerId, cachedStyles);\n\n  // 스타일 태그 업데이트\n  updateStyleTag(containerId, styleTag, cachedStyles);\n\n  return styleTag;\n}\n\n/**\n * 인스턴스 스타일 태그 업데이트 (캐싱 사용)\n * @param {string} containerId - 컨테이너 ID\n * @param {Object} styles - 업데이트할 스타일\n */\nexport function updateInstanceStyles(containerId, styles) {\n  const styleId = `its-instance-${containerId}`;\n  const styleTag = document.getElementById(styleId);\n\n  if (!styleTag) return;\n\n  // 캐시에서 기존 스타일 가져오기\n  let cachedStyles = styleCache.get(containerId);\n  if (!cachedStyles) {\n    cachedStyles = new Map();\n    styleCache.set(containerId, cachedStyles);\n  }\n\n  // 새 스타일로 업데이트\n  for (const [key, value] of Object.entries(styles)) {\n    if (value !== null && value !== undefined) {\n      cachedStyles.set(key, value);\n    }\n  }\n\n  // 스타일 태그 업데이트\n  updateStyleTag(containerId, styleTag, cachedStyles);\n}\n\n/**\n * 스타일 태그 내용 업데이트 (내부 헬퍼)\n * @param {string} containerId - 컨테이너 ID\n * @param {HTMLStyleElement} styleTag - 스타일 태그\n * @param {Map} styles - 스타일 Map\n */\nfunction updateStyleTag(containerId, styleTag, styles) {\n  const cssVars = Array.from(styles.entries())\n    .map(([key, value]) => `${key}: ${value};`)\n    .join('\\n    ');\n\n  styleTag.textContent = `\n    #${containerId} .its-scroller-wrapper {\n      ${cssVars}\n    }\n  `;\n}\n\n/**\n * 인스턴스 스타일 제거\n * @param {string} containerId - 컨테이너 ID\n */\nexport function removeInstanceStyles(containerId) {\n  const styleId = `its-instance-${containerId}`;\n  const styleTag = document.getElementById(styleId);\n  if (styleTag) {\n    styleTag.remove();\n  }\n  styleCache.delete(containerId);\n}\n\n/**\n * 스타일 캐시 가져오기 (디버깅용)\n * @param {string} containerId - 컨테이너 ID\n * @returns {Map|undefined} 캐시된 스타일\n */\nexport function getStyleCache(containerId) {\n  return styleCache.get(containerId);\n}\n","/**\n * 인스턴스 메서드 생성\n * @module instance\n */\n\nimport { TIMING } from './constants.js';\nimport { sanitizeHTML, validateNumber } from './helpers.js';\nimport { updateInstanceStyles, removeInstanceStyles } from './styles.js';\n\n/**\n * 인스턴스 메서드 생성\n * @param {Object} params - 파라미터\n * @returns {Object} 인스턴스 메서드\n */\nexport function createInstanceMethods({\n  config,\n  wrapper,\n  track,\n  container,\n  mediaQuery,\n  isReducedMotion,\n  instancesMap\n}) {\n  // Fade 애니메이션용 변수\n  let fadeTimer = null;\n  let fadeCurrentIndex = 0;\n  let fadeIsPaused = false;\n  let isPlaying = true;\n\n  const instance = {\n    id: config.containerId,\n    element: wrapper,\n    track,\n    container,\n    config: { ...config },\n    isPlaying,\n    isReducedMotion,\n    fadeTimer,\n    fadeCurrentIndex,\n    fadeIsPaused,\n\n    updateText: (newText) => {\n      if (typeof newText !== 'string') {\n        console.error('[TextScroller] updateText: 문자열 타입이 필요합니다');\n        return instance;\n      }\n      const items = track.querySelectorAll('.its-scroller-text');\n      for (const item of items) {\n        if (instance.config.html) {\n          // html 모드에서는 무시\n          continue;\n        }\n        item.textContent = newText;\n      }\n      instance.config.text = newText;\n      return instance;\n    },\n\n    updateHtml: (newHtml) => {\n      if (typeof newHtml !== 'string') {\n        console.error('[TextScroller] updateHtml: 문자열 타입이 필요합니다');\n        return instance;\n      }\n      const sanitized = sanitizeHTML(newHtml);\n      const items = track.querySelectorAll('.its-scroller-text');\n      for (const item of items) {\n        item.innerHTML = sanitized;\n      }\n      instance.config.html = newHtml;\n      return instance;\n    },\n\n    updateSpeed: (newSpeed) => {\n      const validSpeed = validateNumber(newSpeed, 'speed');\n      updateInstanceStyles(config.containerId, {\n        '--its-animation-speed': `${validSpeed}s`\n      });\n      instance.config.speed = validSpeed;\n      return instance;\n    },\n\n    updateDirection: (newDirection) => {\n      if (!['horizontal', 'vertical'].includes(newDirection)) {\n        console.error('[TextScroller] updateDirection: \"horizontal\" 또는 \"vertical\"만 사용 가능합니다');\n        return instance;\n      }\n      wrapper.classList.remove('its-horizontal', 'its-vertical');\n      wrapper.classList.add(`its-${newDirection}`);\n      instance.config.direction = newDirection;\n      return instance;\n    },\n\n    updateColors: ({ textColor, backgroundColor, borderColor } = {}) => {\n      const updates = {};\n      if (textColor) {\n        updates['--its-text-color'] = textColor;\n        instance.config.textColor = textColor;\n      }\n      if (backgroundColor) {\n        updates['--its-bg-color'] = backgroundColor;\n        instance.config.backgroundColor = backgroundColor;\n      }\n      if (borderColor) {\n        updates['--its-border-color'] = borderColor;\n        instance.config.borderColor = borderColor;\n      }\n      if (Object.keys(updates).length > 0) {\n        updateInstanceStyles(config.containerId, updates);\n      }\n      return instance;\n    },\n\n    updateChildren: (newChildren) => {\n      if (typeof newChildren !== 'string') {\n        console.error('[TextScroller] updateChildren: 문자열 타입이 필요합니다');\n        return instance;\n      }\n      const sanitized = sanitizeHTML(newChildren);\n      const items = track.querySelectorAll('.its-scroller-text');\n      for (const item of items) {\n        item.innerHTML = sanitized;\n      }\n      instance.config.children = newChildren;\n      return instance;\n    },\n\n    updateConfig: (newConfig) => {\n      Object.assign(instance.config, newConfig);\n\n      const styleMap = new Map([\n        ['speed', '--its-animation-speed'],\n        ['fontSize', '--its-font-size'],\n        ['fontWeight', '--its-font-weight'],\n        ['fontFamily', '--its-font-family'],\n        ['textColor', '--its-text-color'],\n        ['backgroundColor', '--its-bg-color'],\n        ['fadeWidth', '--its-fade-width'],\n        ['borderColor', '--its-border-color'],\n        ['borderWidth', '--its-border-width'],\n        ['padding', '--its-padding'],\n        ['gap', '--its-gap'],\n        ['letterSpacing', '--its-letter-spacing'],\n        ['separatorOpacity', '--its-separator-opacity'],\n        ['separatorColor', '--its-separator-color']\n      ]);\n\n      const updates = {};\n      for (const [key, value] of Object.entries(newConfig)) {\n        if (styleMap.has(key)) {\n          const cssValue = key === 'speed' ? `${value}s` : value;\n          updates[styleMap.get(key)] = cssValue;\n        }\n      }\n\n      if (Object.keys(updates).length > 0) {\n        updateInstanceStyles(config.containerId, updates);\n      }\n\n      if (newConfig.children !== undefined) {\n        instance.updateChildren(newConfig.children);\n      } else if (newConfig.html !== undefined) {\n        instance.updateHtml(newConfig.html);\n      } else if (newConfig.text !== undefined) {\n        instance.updateText(newConfig.text);\n      }\n      if (newConfig.direction) {\n        instance.updateDirection(newConfig.direction);\n      }\n      if (newConfig.speed !== undefined) {\n        instance.updateSpeed(newConfig.speed);\n      }\n      if (newConfig.fadeEdges !== undefined) {\n        wrapper.classList.toggle('its-fade-enabled', newConfig.fadeEdges);\n      }\n      if (newConfig.rtl !== undefined) {\n        wrapper.classList.toggle('its-rtl', newConfig.rtl);\n      }\n\n      return instance;\n    },\n\n    // Fade 애니메이션 전용 메서드\n    fadeShowItem: (index) => {\n      if (config.animationType !== 'fade') return instance;\n\n      const items = track.querySelectorAll('.its-scroller-item');\n      if (items.length === 0) return instance;\n\n      for (const item of items) {\n        item.classList.remove('its-active', 'its-prev', 'its-next');\n      }\n\n      items[index].classList.add('its-active');\n      instance.fadeCurrentIndex = index;\n      return instance;\n    },\n\n    fadeNext: () => {\n      if (config.animationType !== 'fade' || instance.fadeIsPaused || instance.isReducedMotion) {\n        return instance;\n      }\n\n      const items = track.querySelectorAll('.its-scroller-item');\n      if (items.length === 0) return instance;\n\n      const prevIndex = instance.fadeCurrentIndex;\n      const nextIndex = (instance.fadeCurrentIndex + 1) % items.length;\n\n      items[prevIndex].classList.add('its-prev');\n      items[prevIndex].classList.remove('its-active');\n      items[nextIndex].classList.add('its-active');\n      items[nextIndex].classList.remove('its-next');\n\n      instance.fadeCurrentIndex = nextIndex;\n      return instance;\n    },\n\n    fadeStart: () => {\n      if (config.animationType !== 'fade' || instance.isReducedMotion) return instance;\n\n      instance.fadeTimer = setInterval(() => {\n        instance.fadeNext();\n      }, config.interval);\n\n      return instance;\n    },\n\n    fadeStop: () => {\n      if (instance.fadeTimer) {\n        clearInterval(instance.fadeTimer);\n        instance.fadeTimer = null;\n      }\n      return instance;\n    },\n\n    fadePause: () => {\n      instance.fadeIsPaused = true;\n      return instance;\n    },\n\n    fadeResume: () => {\n      instance.fadeIsPaused = false;\n      return instance;\n    },\n\n    pause: () => {\n      if (config.animationType === 'fade') {\n        instance.fadePause();\n      } else {\n        track.classList.add('its-paused');\n      }\n      instance.isPlaying = false;\n      return instance;\n    },\n\n    play: () => {\n      if (config.animationType === 'fade') {\n        instance.fadeResume();\n      } else {\n        track.classList.remove('its-paused');\n      }\n      instance.isPlaying = true;\n      return instance;\n    },\n\n    toggle: () => {\n      instance.isPlaying ? instance.pause() : instance.play();\n      return instance;\n    },\n\n    reset: () => {\n      if (config.animationType === 'fade') {\n        instance.fadeStop();\n        instance.fadeShowItem(0);\n        if (instance.isPlaying && !instance.isReducedMotion) {\n          instance.fadeStart();\n        }\n      } else {\n        track.classList.add('its-reset');\n        requestAnimationFrame(() => {\n          track.classList.remove('its-reset');\n        });\n      }\n      return instance;\n    },\n\n    setDelay: (delay) => {\n      updateInstanceStyles(config.containerId, {\n        '--its-animation-delay': delay\n      });\n      instance.config.animationDelay = delay;\n      return instance;\n    },\n\n    destroy: () => {\n      // Fade 타이머 정리\n      if (instance.fadeTimer) {\n        clearInterval(instance.fadeTimer);\n        instance.fadeTimer = null;\n      }\n\n      // 애니메이션 정지\n      if (track) {\n        track.classList.add('its-reset');\n      }\n\n      // 이벤트 리스너 제거\n      if (instance._keyboardHandler) {\n        container.removeEventListener('keydown', instance._keyboardHandler);\n      }\n      if (instance._hoverHandler) {\n        container.removeEventListener('mouseenter', instance._hoverHandler);\n        container.removeEventListener('mouseleave', instance._hoverLeaveHandler);\n      }\n      if (instance._focusHandler) {\n        container.removeEventListener('focusin', instance._focusHandler);\n        container.removeEventListener('focusout', instance._focusOutHandler);\n      }\n      if (instance._visibilityHandler) {\n        document.removeEventListener('visibilitychange', instance._visibilityHandler);\n      }\n      if (instance._reducedMotionHandler) {\n        mediaQuery.removeEventListener('change', instance._reducedMotionHandler);\n      }\n\n      // 인스턴스별 스타일 태그 제거\n      removeInstanceStyles(config.containerId);\n\n      // DOM 제거\n      if (wrapper && wrapper.parentNode) {\n        wrapper.remove();\n      }\n\n      // 참조 해제 (메모리 누수 방지)\n      instance.element = null;\n      instance.track = null;\n      instance.container = null;\n\n      // 인스턴스 맵에서 제거\n      instancesMap.delete(config.containerId);\n    },\n\n    getState: () => ({\n      isPlaying: instance.isPlaying,\n      config: { ...instance.config },\n      fadeCurrentIndex: instance.fadeCurrentIndex,\n      isReducedMotion: instance.isReducedMotion\n    })\n  };\n\n  return instance;\n}\n\n/**\n * 이벤트 리스너 설정\n * @param {Object} instance - 인스턴스\n * @param {Object} config - 설정\n * @param {HTMLElement} container - 컨테이너\n * @param {MediaQueryList} mediaQuery - 미디어 쿼리\n */\nexport function setupEventListeners(instance, config, container, mediaQuery) {\n  // 키보드 제어 (Space로 일시정지/재생)\n  if (config.enableKeyboardControl) {\n    instance._keyboardHandler = (e) => {\n      if (e.key === ' ' || e.key === 'Spacebar') {\n        e.preventDefault();\n        instance.toggle();\n      }\n    };\n    container.addEventListener('keydown', instance._keyboardHandler);\n  }\n\n  // 호버 시 일시정지 (WCAG 2.2.2)\n  if (config.pauseOnHover) {\n    instance._hoverHandler = () => instance.pause();\n    instance._hoverLeaveHandler = () => {\n      setTimeout(() => instance.play(), TIMING.HOVER_RESUME_DELAY);\n    };\n    container.addEventListener('mouseenter', instance._hoverHandler);\n    container.addEventListener('mouseleave', instance._hoverLeaveHandler);\n  }\n\n  // 포커스 시 일시정지 (WCAG 2.2.2)\n  if (config.pauseOnFocus) {\n    instance._focusHandler = () => instance.pause();\n    instance._focusOutHandler = (e) => {\n      if (!container.contains(e.relatedTarget)) {\n        setTimeout(() => instance.play(), TIMING.FOCUS_RESUME_DELAY);\n      }\n    };\n    container.addEventListener('focusin', instance._focusHandler);\n    container.addEventListener('focusout', instance._focusOutHandler);\n  }\n\n  // 페이지 visibility 변경 시\n  instance._visibilityHandler = () => {\n    if (document.hidden) {\n      instance.pause();\n    } else if (instance.isPlaying) {\n      setTimeout(() => instance.play(), TIMING.VISIBILITY_RESUME_DELAY);\n    }\n  };\n  document.addEventListener('visibilitychange', instance._visibilityHandler);\n\n  // prefers-reduced-motion 변경 감지\n  instance._reducedMotionHandler = (e) => {\n    instance.isReducedMotion = e.matches;\n    if (e.matches) {\n      if (config.animationType === 'fade') {\n        instance.fadeStop();\n      } else {\n        instance.pause();\n      }\n    } else {\n      if (config.animationType === 'fade') {\n        instance.fadeStart();\n      } else {\n        instance.play();\n      }\n    }\n  };\n  mediaQuery.addEventListener('change', instance._reducedMotionHandler);\n}\n","/**\n * 무한 텍스트 스크롤러\n * @version 1.4.0\n * @author deep\n * @description 무한 스크롤 텍스트 애니메이션을 위한 경량 라이브러리\n * WCAG 2.2.2 (Pause, Stop, Hide) 준수\n * prefers-reduced-motion 지원\n * @license MIT\n */\n\nimport { DEFAULT_CONFIG, PRESETS } from './constants.js';\nimport { validateNumber, createElement, createTrack } from './helpers.js';\nimport { injectStyles, createInstanceStyles } from './styles.js';\nimport { createInstanceMethods, setupEventListeners } from './instance.js';\n\nexport class InfiniteTextScroller {\n  static VERSION = '1.4.0';\n  static instances = new Map();\n\n  static defaultConfig = DEFAULT_CONFIG;\n  static presets = PRESETS;\n\n  /**\n   * 문서 헤드에 스타일 주입\n   */\n  static injectStyles = injectStyles;\n\n  /**\n   * 새로운 텍스트 스크롤러 인스턴스 생성\n   * @param {Object} options - 설정 옵션\n   * @param {string} options.preset - 프리셋 이름 (minimal, news, ticker, banner, alert, announcement, currency, stock)\n   * @returns {Object|null} 제어 메서드가 포함된 스크롤러 인스턴스\n   */\n  static create(options) {\n    // 프리셋 적용\n    let presetConfig = {};\n    if (options.preset && InfiniteTextScroller.presets[options.preset]) {\n      presetConfig = InfiniteTextScroller.presets[options.preset];\n    }\n\n    // 우선순위: defaultConfig < preset < options\n    const config = {\n      ...InfiniteTextScroller.defaultConfig,\n      ...presetConfig,\n      ...options\n    };\n\n    // 필수 옵션 검증\n    if (!config.containerId) {\n      console.error('[TextScroller] containerId는 필수입니다');\n      return null;\n    }\n\n    if (!config.text && !config.html && !config.children) {\n      console.error('[TextScroller] text, html, children 중 하나는 필수입니다');\n      return null;\n    }\n\n    // 숫자 파라미터 검증\n    config.speed = validateNumber(config.speed, 'speed');\n    config.duplicates = validateNumber(config.duplicates, 'duplicates');\n    config.separatorOpacity = validateNumber(config.separatorOpacity, 'separatorOpacity');\n\n    const container = document.getElementById(config.containerId);\n    if (!container) {\n      console.error(`[TextScroller] ID \"${config.containerId}\"를 가진 요소를 찾을 수 없습니다`);\n      return null;\n    }\n\n    // 스타일 주입 (활성화된 경우)\n    if (config.autoInjectStyles) {\n      InfiniteTextScroller.injectStyles();\n    }\n\n    // 컨테이너 클래스 추가\n    if (!container.classList.contains('its-scroller-container')) {\n      container.classList.add('its-scroller-container');\n    }\n\n    // ARIA 속성 설정\n    container.setAttribute('role', config.role);\n    if (config.ariaLabel) {\n      container.setAttribute('aria-label', config.ariaLabel);\n    }\n    if (config.ariaLive !== 'off') {\n      container.setAttribute('aria-live', config.ariaLive);\n    } else {\n      container.setAttribute('aria-live', 'off');\n    }\n\n    // 키보드 제어 활성화\n    if (config.enableKeyboardControl) {\n      container.setAttribute('tabindex', '0');\n    }\n\n    // 테두리 클래스 추가\n    if (config.borderTop) {\n      container.classList.add('its-border-top');\n    }\n    if (config.borderBottom) {\n      container.classList.add('its-border-bottom');\n    }\n\n    // 래퍼 생성\n    const wrapperClasses = [\n      'its-scroller-wrapper',\n      config.animationType === 'fade' ? 'its-fade-type' : `its-${config.direction}`,\n      config.fadeEdges && config.animationType !== 'fade' ? 'its-fade-enabled' : '',\n      config.rtl ? 'its-rtl' : '',\n      config.className\n    ].filter(Boolean).join(' ');\n\n    const wrapper = createElement('div', wrapperClasses);\n\n    // 인스턴스별 스타일 태그 생성\n    createInstanceStyles(config.containerId, {\n      '--its-animation-speed': `${config.speed}s`,\n      '--its-font-size': config.fontSize,\n      '--its-font-weight': config.fontWeight,\n      '--its-font-family': config.fontFamily,\n      '--its-text-color': config.textColor,\n      '--its-bg-color': config.backgroundColor,\n      '--its-fade-width': config.fadeWidth,\n      '--its-border-color': config.borderColor,\n      '--its-border-width': config.borderWidth,\n      '--its-padding': config.padding,\n      '--its-gap': config.gap,\n      '--its-letter-spacing': config.letterSpacing,\n      '--its-animation-timing': config.animationTimingFunction,\n      '--its-animation-delay': config.animationDelay,\n      '--its-separator-opacity': config.separatorOpacity,\n      '--its-separator-color': config.separatorColor !== 'inherit' ? config.separatorColor : config.textColor\n    });\n\n    // 트랙 생성\n    const track = createTrack(\n      config.text,\n      config.separator,\n      config.direction,\n      config.duplicates,\n      config\n    );\n\n    if (config.pauseOnHover) {\n      track.classList.add('its-pause-on-hover');\n    }\n\n    wrapper.appendChild(track);\n    container.appendChild(wrapper);\n\n    // prefers-reduced-motion 감지\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    const isReducedMotion = mediaQuery.matches;\n\n    // 인스턴스 메서드 생성\n    const instance = createInstanceMethods({\n      config,\n      wrapper,\n      track,\n      container,\n      mediaQuery,\n      isReducedMotion,\n      instancesMap: InfiniteTextScroller.instances\n    });\n\n    // 이벤트 리스너 설정\n    setupEventListeners(instance, config, container, mediaQuery);\n\n    // Fade 타입 초기화\n    if (config.animationType === 'fade' && !isReducedMotion) {\n      instance.fadeShowItem(0);\n      instance.fadeStart();\n    }\n\n    // 인스턴스 저장\n    InfiniteTextScroller.instances.set(config.containerId, instance);\n\n    return instance;\n  }\n\n  /**\n   * 컨테이너 ID로 기존 스크롤러 인스턴스 가져오기\n   * @param {string} containerId - 컨테이너 요소 ID\n   * @returns {Object|undefined} 스크롤러 인스턴스\n   */\n  static getInstance(containerId) {\n    return InfiniteTextScroller.instances.get(containerId);\n  }\n\n  /**\n   * 모든 스크롤러 인스턴스 제거\n   */\n  static destroyAll() {\n    for (const instance of InfiniteTextScroller.instances.values()) {\n      instance.destroy();\n    }\n  }\n\n  /**\n   * 모든 활성 인스턴스 가져오기\n   * @returns {Array} 스크롤러 인스턴스 배열\n   */\n  static getAllInstances() {\n    return Array.from(InfiniteTextScroller.instances.values());\n  }\n\n  /**\n   * 모든 인스턴스 일시 정지\n   */\n  static pauseAll() {\n    for (const instance of InfiniteTextScroller.instances.values()) {\n      instance.pause();\n    }\n  }\n\n  /**\n   * 모든 인스턴스 재생\n   */\n  static playAll() {\n    for (const instance of InfiniteTextScroller.instances.values()) {\n      instance.play();\n    }\n  }\n}\n\nexport default InfiniteTextScroller;\n\nexport const createScroller = InfiniteTextScroller.create.bind(InfiniteTextScroller);\nexport const getScroller = InfiniteTextScroller.getInstance.bind(InfiniteTextScroller);\nexport const destroyAllScrollers = InfiniteTextScroller.destroyAll.bind(InfiniteTextScroller);\nexport const pauseAllScrollers = InfiniteTextScroller.pauseAll.bind(InfiniteTextScroller);\nexport const playAllScrollers = InfiniteTextScroller.playAll.bind(InfiniteTextScroller);\n"],"names":["TIMING","VALIDATION_RANGES","speed","min","max","default","duplicates","separatorOpacity","ALLOWED_HTML","tags","Set","attributes","sanitizeHTML","html","temp","document","createElement","innerHTML","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","nodesToRemove","node","nextNode","tagName","toLowerCase","has","push","attrs","Array","from","attr","name","removeAttribute","text","createTextNode","textContent","parentNode","replaceChild","validateNumber","value","paramName","range","console","warn","concat","defaultValue","isNaN","tag","className","arguments","length","undefined","el","createScrollerItem","separator","direction","config","item","textSpan","children","appendChild","separatorSpan","styleCache","Map","updateInstanceStyles","containerId","styles","styleId","styleTag","getElementById","cachedStyles","get","set","key","Object","entries","updateStyleTag","cssVars","map","_ref","join","createInstanceMethods","wrapper","track","container","mediaQuery","isReducedMotion","instancesMap","instance","id","element","_objectSpread","isPlaying","fadeTimer","fadeCurrentIndex","fadeIsPaused","updateText","newText","error","items","querySelectorAll","updateHtml","newHtml","sanitized","updateSpeed","newSpeed","validSpeed","updateDirection","newDirection","includes","classList","remove","add","updateColors","textColor","backgroundColor","borderColor","updates","keys","updateChildren","newChildren","updateConfig","newConfig","assign","styleMap","cssValue","fadeEdges","toggle","rtl","fadeShowItem","index","animationType","fadeNext","prevIndex","nextIndex","fadeStart","setInterval","interval","fadeStop","clearInterval","fadePause","fadeResume","pause","play","reset","requestAnimationFrame","setDelay","delay","animationDelay","destroy","_keyboardHandler","removeEventListener","_hoverHandler","_hoverLeaveHandler","_focusHandler","_focusOutHandler","_visibilityHandler","_reducedMotionHandler","delete","removeInstanceStyles","getState","InfiniteTextScroller","create","options","presetConfig","preset","presets","defaultConfig","autoInjectStyles","injectStyles","contains","setAttribute","role","ariaLabel","ariaLive","enableKeyboardControl","borderTop","borderBottom","filter","Boolean","head","createInstanceStyles","fontSize","fontWeight","fontFamily","fadeWidth","borderWidth","padding","gap","letterSpacing","animationTimingFunction","separatorColor","totalItems","fragment","createDocumentFragment","i","createTrack","pauseOnHover","window","matchMedia","matches","instances","e","preventDefault","addEventListener","setTimeout","pauseOnFocus","relatedTarget","hidden","setupEventListeners","getInstance","destroyAll","values","getAllInstances","pauseAll","playAll","_defineProperty","reducedMotionFallback","minimal","news","ticker","banner","alert","announcement","currency","stock","style","createScroller","bind","getScroller","destroyAllScrollers","pauseAllScrollers","playAllScrollers"],"mappings":"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"}